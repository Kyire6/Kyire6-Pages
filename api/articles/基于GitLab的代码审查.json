{"title":"基于 GitLab 的代码审查","slug":"基于GitLab的代码审查","date":"2022-10-28T03:24:53.000Z","updated":"2022-10-28T03:24:53.000Z","comments":true,"path":"api/articles/基于GitLab的代码审查.json","excerpt":null,"covers":["https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112809.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112923.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112941.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112952.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113007.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113020.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113030.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113036.png","https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113040.png"],"content":"<h2 id=\"Code-Review-流程\"><a href=\"#Code-Review-流程\" class=\"headerlink\" title=\"Code Review 流程\"></a>Code Review 流程</h2><p>根据 <code>Git Flow</code> 工作流，开发人员在 <code>feature</code> 分支进行开发，开发完成之后 <code>Merge</code> 到 <code>develop</code> 分支进行测试。</p>\n<p>那么最适合做 <code>Code Review</code> 就是 <code>featrue</code> 分支合并到 <code>develop</code> 分支的环节</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112809.png\" alt=\"img\"></p>\n<blockquote>\n<p>注：为了保证必须以 Merge 的方式变更 develop 分支、release 分支、以及 master 分支，我们对 Push 以及 Merge 权限进行限制</p>\n<p><code>项目仓库 -&gt; 设置 -&gt; 仓库设置 -&gt; Protected Branches</code></p>\n<p><strong>Protected Branches 配置</strong></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112923.png\" alt=\"img\"></p>\n<p>这里，我们限制分支，所有的开发人员对 <code>develop</code> 分支、<code>release</code> 分支、以及 <code>master</code> 分支均无 <code>Push</code> 权限，只能以 <code>Merge</code> 方式合并到对应分支，而且只有 <code>Maintainers（Masters）</code> 组的用户有 <code>Merge</code> 权限。</p>\n</blockquote>\n<h2 id=\"Code-View-示例\"><a href=\"#Code-View-示例\" class=\"headerlink\" title=\"Code View 示例\"></a>Code View 示例</h2><h3 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h3><p>变更 <code>feature 分支</code> 分支 <code>README.md</code> 文件，为 <code>Merge Request</code> 提供基础</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112941.png\" alt=\"img\"></p>\n<p>随意更改一行内容，然后 <code>Commit Changes</code> 即可</p>\n<h3 id=\"创建-Merge-Request\"><a href=\"#创建-Merge-Request\" class=\"headerlink\" title=\"创建 Merge Request\"></a>创建 <code>Merge Request</code></h3><p><code>左侧菜单 -&gt; Merge Request -&gt; 点击 New Merge Request</code></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112952.png\" alt=\"img\"></p>\n<p>Source branch 选择：<code>feature/test</code></p>\n<p>Target branch 选择：<code>develop</code></p>\n<p>然后：<code>Compare branches and continue</code></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113007.png\" alt=\"img\"></p>\n<p>操作项/填写项说明：</p>\n<table>\n<thead>\n<tr>\n<th>操作项/填写项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Title</td>\n<td>标题，没有特殊要求保持默认即可</td>\n</tr>\n<tr>\n<td>Description</td>\n<td>描述，需要将变更的需求描述清楚，最好附件 Code Review 要点</td>\n</tr>\n<tr>\n<td>Assignee</td>\n<td>分配到的人，被分配到的人将会收到邮件通知，跟 Merge 权限没有必然关系，仍然是项目的 Maintainers（Masters）角色拥有 Merge 权限</td>\n</tr>\n<tr>\n<td>Milestone</td>\n<td>里程碑，如果没有可不选</td>\n</tr>\n<tr>\n<td>Label</td>\n<td>标签，如果没有可不选</td>\n</tr>\n<tr>\n<td>Merge options</td>\n<td>合并选项，可以勾选当合并请求被接受时，删除源分支或压缩请求</td>\n</tr>\n</tbody></table>\n<h3 id=\"Merge-Request-操作\"><a href=\"#Merge-Request-操作\" class=\"headerlink\" title=\"Merge Request 操作\"></a><code>Merge Request</code> 操作</h3><p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113020.png\" alt=\"img\"></p>\n<p><code>Merge Request</code> 创建之后就会转到该页面，被分配到的人（Assignee）会收到邮件提醒，如果需要多个人进行 <code>Code Review</code>，只要将该页面的链接发给其他项目成员即可。项目成员可以查看变更并评论，只不过按照之前的配置，只有 <code>Maintainers（Masters）</code>角色的成员才有 <code>Merge</code> 的权限。</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113030.png\" alt=\"img\"></p>\n<p>在 <code>变更（Changes）</code> 选项卡中，我们可以看到所有的变更。将光标移动到行号处会出现评论按钮，我们可以点击评论按钮发起评论，这个评论是对项目成员可见的，大家可在讨论区进行讨论。最终讨论发起者有权将讨论标记为已解决 <code>resolved</code></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113036.png\" alt=\"img\"></p>\n<p>当所有的问题已解决之后（如果选择了审批人也需要审批通过），<code>Maintainers（Masters）</code>成员点击 <code>合并（Merge）</code> 完成合并即可。</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113040.png\" alt=\"img\"></p>\n<p><code>Merge</code> 完成之后，可以选择 <code>删除源分支（Remove Source Branch）</code> 等操作。</p>\n<p><code>develop</code> 分支合并到 <code>release</code> 分支，以及 <code>release</code> 分支合并到 <code>master</code> 是不需要经过 <code>Code Review</code> 的，直接 <code>Merge</code> 即可。这里就省略了…</p>\n","more":"<h2 id=\"Code-Review-流程\"><a href=\"#Code-Review-流程\" class=\"headerlink\" title=\"Code Review 流程\"></a>Code Review 流程</h2><p>根据 <code>Git Flow</code> 工作流，开发人员在 <code>feature</code> 分支进行开发，开发完成之后 <code>Merge</code> 到 <code>develop</code> 分支进行测试。</p>\n<p>那么最适合做 <code>Code Review</code> 就是 <code>featrue</code> 分支合并到 <code>develop</code> 分支的环节</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112809.png\" alt=\"img\"></p>\n<blockquote>\n<p>注：为了保证必须以 Merge 的方式变更 develop 分支、release 分支、以及 master 分支，我们对 Push 以及 Merge 权限进行限制</p>\n<p><code>项目仓库 -&gt; 设置 -&gt; 仓库设置 -&gt; Protected Branches</code></p>\n<p><strong>Protected Branches 配置</strong></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112923.png\" alt=\"img\"></p>\n<p>这里，我们限制分支，所有的开发人员对 <code>develop</code> 分支、<code>release</code> 分支、以及 <code>master</code> 分支均无 <code>Push</code> 权限，只能以 <code>Merge</code> 方式合并到对应分支，而且只有 <code>Maintainers（Masters）</code> 组的用户有 <code>Merge</code> 权限。</p>\n</blockquote>\n<h2 id=\"Code-View-示例\"><a href=\"#Code-View-示例\" class=\"headerlink\" title=\"Code View 示例\"></a>Code View 示例</h2><h3 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h3><p>变更 <code>feature 分支</code> 分支 <code>README.md</code> 文件，为 <code>Merge Request</code> 提供基础</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112941.png\" alt=\"img\"></p>\n<p>随意更改一行内容，然后 <code>Commit Changes</code> 即可</p>\n<h3 id=\"创建-Merge-Request\"><a href=\"#创建-Merge-Request\" class=\"headerlink\" title=\"创建 Merge Request\"></a>创建 <code>Merge Request</code></h3><p><code>左侧菜单 -&gt; Merge Request -&gt; 点击 New Merge Request</code></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028112952.png\" alt=\"img\"></p>\n<p>Source branch 选择：<code>feature/test</code></p>\n<p>Target branch 选择：<code>develop</code></p>\n<p>然后：<code>Compare branches and continue</code></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113007.png\" alt=\"img\"></p>\n<p>操作项/填写项说明：</p>\n<table>\n<thead>\n<tr>\n<th>操作项/填写项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Title</td>\n<td>标题，没有特殊要求保持默认即可</td>\n</tr>\n<tr>\n<td>Description</td>\n<td>描述，需要将变更的需求描述清楚，最好附件 Code Review 要点</td>\n</tr>\n<tr>\n<td>Assignee</td>\n<td>分配到的人，被分配到的人将会收到邮件通知，跟 Merge 权限没有必然关系，仍然是项目的 Maintainers（Masters）角色拥有 Merge 权限</td>\n</tr>\n<tr>\n<td>Milestone</td>\n<td>里程碑，如果没有可不选</td>\n</tr>\n<tr>\n<td>Label</td>\n<td>标签，如果没有可不选</td>\n</tr>\n<tr>\n<td>Merge options</td>\n<td>合并选项，可以勾选当合并请求被接受时，删除源分支或压缩请求</td>\n</tr>\n</tbody></table>\n<h3 id=\"Merge-Request-操作\"><a href=\"#Merge-Request-操作\" class=\"headerlink\" title=\"Merge Request 操作\"></a><code>Merge Request</code> 操作</h3><p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113020.png\" alt=\"img\"></p>\n<p><code>Merge Request</code> 创建之后就会转到该页面，被分配到的人（Assignee）会收到邮件提醒，如果需要多个人进行 <code>Code Review</code>，只要将该页面的链接发给其他项目成员即可。项目成员可以查看变更并评论，只不过按照之前的配置，只有 <code>Maintainers（Masters）</code>角色的成员才有 <code>Merge</code> 的权限。</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113030.png\" alt=\"img\"></p>\n<p>在 <code>变更（Changes）</code> 选项卡中，我们可以看到所有的变更。将光标移动到行号处会出现评论按钮，我们可以点击评论按钮发起评论，这个评论是对项目成员可见的，大家可在讨论区进行讨论。最终讨论发起者有权将讨论标记为已解决 <code>resolved</code></p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113036.png\" alt=\"img\"></p>\n<p>当所有的问题已解决之后（如果选择了审批人也需要审批通过），<code>Maintainers（Masters）</code>成员点击 <code>合并（Merge）</code> 完成合并即可。</p>\n<p><img src=\"https://my-typora-oss.oss-cn-shanghai.aliyuncs.com/image-master/20221028113040.png\" alt=\"img\"></p>\n<p><code>Merge</code> 完成之后，可以选择 <code>删除源分支（Remove Source Branch）</code> 等操作。</p>\n<p><code>develop</code> 分支合并到 <code>release</code> 分支，以及 <code>release</code> 分支合并到 <code>master</code> 是不需要经过 <code>Code Review</code> 的，直接 <code>Merge</code> 即可。这里就省略了…</p>\n","categories":[{"name":"DevOps","path":"api/categories/DevOps.json"}],"tags":[{"name":"Git","path":"api/tags/Git.json"},{"name":"开发规范","path":"api/tags/开发规范.json"}]}